import { jsx } from "@builder.io/qwik/jsx-runtime";
import { component$, useSignal, $, useContextProvider, Slot } from "@builder.io/qwik";
import { findComponent, processChildren } from "../../utils/inline-component.qwik.mjs";
import { ChecklistContext } from "./checklist-context.qwik.mjs";
import { ChecklistItem } from "./checklist-item.qwik.mjs";
const ChecklistRoot = (
  //removing component to make inline causes Internal Server
  ((props) => {
    const children = props.children;
    let currItemIndex = 0;
    const itemsMap = /* @__PURE__ */ new Map();
    findComponent(ChecklistItem, (itemProps) => {
      itemProps._index = currItemIndex;
      itemsMap.set(currItemIndex, itemProps.disabled);
      currItemIndex++;
    });
    processChildren(props.children);
    return /* @__PURE__ */ jsx("ul", {
      children: /* @__PURE__ */ jsx(ChecklistBase, {
        initialStates: props.initialStates,
        children
      })
    });
  })
);
const ChecklistBase = component$(({ initialStates, ...props }) => {
  const items = useSignal(initialStates ?? []);
  const allSelected = useSignal(false);
  const toggleAllSelected = $(() => {
    allSelected.value = !allSelected.value;
  });
  const indeterminate = useSignal(false);
  const context = {
    items,
    allSelected,
    toggleAllSelected,
    indeterminate,
    initialStates
  };
  useContextProvider(ChecklistContext, context);
  return /* @__PURE__ */ jsx("div", {
    ...props,
    children: /* @__PURE__ */ jsx(Slot, {})
  });
});
export {
  ChecklistBase,
  ChecklistRoot
};
