"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const jsxRuntime = require("@builder.io/qwik/jsx-runtime");
const qwik = require("@builder.io/qwik");
const checkboxRoot = require("../checkbox/checkbox-root.qwik.cjs");
const checklistContext = require("./checklist-context.qwik.cjs");
const ChecklistItem = qwik.component$((props) => {
  const { _index } = props;
  if (_index === void 0) {
    throw new Error("Checklist Item must have an index.");
  }
  const context = qwik.useContext(checklistContext.ChecklistContext);
  const isCheckedSig = qwik.useSignal(context.items.value[_index]);
  const initialLoadSig = qwik.useSignal(true);
  qwik.useTask$(({ track }) => {
    track(() => context.allSelected.value);
    if (initialLoadSig.value) {
      return;
    }
    if (context.allSelected.value) {
      isCheckedSig.value = true;
    } else {
      isCheckedSig.value = false;
    }
  });
  qwik.useTask$(function syncCheckboxState({ track }) {
    track(() => isCheckedSig.value);
    context.items.value[_index] = isCheckedSig.value;
    const isAllSelected = context.items.value.every((item) => item === true);
    if (isAllSelected) {
      context.allSelected.value = true;
    }
  });
  qwik.useTask$(() => {
    initialLoadSig.value = false;
  });
  return /* @__PURE__ */ jsxRuntime.jsx(checkboxRoot.CheckboxRoot, {
    as: "li",
    "bind:checked": isCheckedSig,
    index: _index,
    children: /* @__PURE__ */ jsxRuntime.jsx(qwik.Slot, {})
  });
});
exports.ChecklistItem = ChecklistItem;
