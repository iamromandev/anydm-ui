import { jsx } from "@builder.io/qwik/jsx-runtime";
import { component$, useContext, useSignal, $, useTask$, Slot } from "@builder.io/qwik";
import { ChecklistContext } from "./checklist-context.qwik.mjs";
import { CheckboxRoot } from "../checkbox/checkbox-root.qwik.mjs";
const ChecklistSelectAll = component$((props) => {
  const context = useContext(ChecklistContext);
  const isInitiallySelected = context.initialStates.every(Boolean);
  const allSelected = useSignal(isInitiallySelected);
  const items = useSignal(context.items.value);
  const toggleAll = $(() => {
    const newState = !allSelected.value;
    allSelected.value = newState;
    items.value = items.value.map(() => newState);
    context.toggleAllSelected();
  });
  useTask$(({ track }) => {
    track(() => context.items.value);
  });
  return /* @__PURE__ */ jsx(CheckboxRoot, {
    as: "li",
    "bind:checked": allSelected,
    // @ts-expect-error annoying type issue
    onClick$: toggleAll,
    id: "selectAll",
    "data-qds-selectall": true,
    ...props,
    children: /* @__PURE__ */ jsx(Slot, {})
  });
});
export {
  ChecklistSelectAll
};
