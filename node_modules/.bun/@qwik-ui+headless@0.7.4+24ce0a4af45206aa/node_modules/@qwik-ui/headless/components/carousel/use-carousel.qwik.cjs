"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const qwik = require("@builder.io/qwik");
const build = require("@builder.io/qwik/build");
function useCarousel(context) {
  const validIndexesSig = qwik.useComputed$(() => {
    const totalSlides = context.numSlidesSig.value;
    const slidesPerView = context.slidesPerViewSig.value;
    const move = context.moveSig.value;
    const lastScrollableIndex = totalSlides - slidesPerView;
    const indexes = [];
    for (let i = 0; i <= lastScrollableIndex; i += move) {
      indexes.push(i);
    }
    if (lastScrollableIndex % move !== 0) {
      indexes.push(lastScrollableIndex);
    }
    return indexes;
  });
  return {
    validIndexesSig
  };
}
function useAutoplay(context) {
  const intervalIdSig = qwik.useSignal();
  const isReducedMotionSig = qwik.useSignal(false);
  const hasChangeListenerSig = qwik.useSignal(false);
  const checkReducedMotion$ = qwik.$(async (e) => {
    isReducedMotionSig.value = e.matches;
    if (e.matches) {
      context.isAutoplaySig.value = false;
      clearInterval(intervalIdSig.value);
    }
  });
  qwik.useTask$(function handleReducedMotion({ track }) {
    track(() => context.currentIndexSig.value);
    if (build.isServer) return;
    const mediaQueryList = window.matchMedia("(prefers-reduced-motion: reduce)");
    isReducedMotionSig.value = mediaQueryList.matches;
    if (!hasChangeListenerSig.value) {
      mediaQueryList.addEventListener("change", checkReducedMotion$);
      hasChangeListenerSig.value = true;
    }
  });
  qwik.useTask$(function handleAutoplayProgress({ track }) {
    track(() => context.isAutoplaySig.value);
    if (isReducedMotionSig.value) return;
    if (!context.isAutoplaySig.value) {
      clearInterval(intervalIdSig.value);
      return;
    }
    const advanceSlideIndex$ = qwik.$(() => {
      context.currentIndexSig.value = (context.currentIndexSig.value + 1) % context.numSlidesSig.value;
    });
    intervalIdSig.value = setInterval(advanceSlideIndex$, context.autoPlayIntervalMsSig.value);
  });
}
exports.useAutoplay = useAutoplay;
exports.useCarousel = useCarousel;
