"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const jsxRuntime = require("@builder.io/qwik/jsx-runtime");
const comboboxRoot = require("./combobox-root.qwik.cjs");
const comboboxItem = require("./combobox-item.qwik.cjs");
const comboboxItemLabel = require("./combobox-item-label.qwik.cjs");
const comboboxEmpty = require("./combobox-empty.qwik.cjs");
const comboboxErrorMessage = require("./combobox-error-message.qwik.cjs");
const inlineComponent = require("../../utils/inline-component.qwik.cjs");
const HComboboxRoot = (props) => {
  const { children, comboboxItemComponent: UserItem, comboboxItemLabelComponent: UserItemLabel, ...rest } = props;
  const HComboboxItem = UserItem ?? comboboxItem.HComboboxItem;
  const HComboboxItemLabel = UserItemLabel ?? comboboxItemLabel.HComboboxItemLabel;
  const HComboboxEmpty = comboboxEmpty.HComboboxEmpty;
  const itemsMap = /* @__PURE__ */ new Map();
  let currItemIndex = 0;
  let initialIndex = null;
  let initialValue;
  let isItemDisabled = false;
  let givenItemValue = null;
  let hasEmptyComp = false;
  let hasErrorComp = false;
  inlineComponent.findComponent(HComboboxItem, (itemProps) => {
    itemProps._index = currItemIndex;
    isItemDisabled = itemProps.disabled === true;
    if (itemProps.value) {
      givenItemValue = itemProps.value;
    }
    if (itemProps.children) {
      return inlineComponent.processChildren(itemProps.children);
    }
  });
  inlineComponent.findComponent(HComboboxItemLabel, (labelProps) => {
    const displayValue = labelProps.children;
    const value = givenItemValue !== null ? givenItemValue : displayValue;
    itemsMap.set(currItemIndex, {
      value,
      displayValue,
      disabled: isItemDisabled
    });
    if (props.value && props.multiple) {
      throw new Error(`Qwik UI: When in multiple selection mode, the value prop is disabled. Use the bind:value prop's initial signal value instead.`);
    }
    if (value === props.value) {
      initialIndex = currItemIndex;
      initialValue = value;
    }
    currItemIndex++;
  });
  inlineComponent.findComponent(HComboboxEmpty, () => {
    hasEmptyComp = true;
  });
  inlineComponent.findComponent(comboboxErrorMessage.HComboboxErrorMessage, () => {
    hasErrorComp = true;
  });
  inlineComponent.processChildren(children);
  return /* @__PURE__ */ jsxRuntime.jsx(comboboxRoot.HComboboxRootImpl, {
    ...rest,
    initialIndex,
    initialValue,
    _itemsMap: itemsMap,
    hasEmptyComp,
    hasErrorComp,
    children
  });
};
exports.HComboboxRoot = HComboboxRoot;
